define([],function(){return function(){var a=false;var c=["serif","sans-serif","monospace","cursive","fantasy"];var b=null;function e(){if(a){return}a=true;var f=document.body;var g=document.body.firstChild;var h=document.createElement("div");h.id="fontdetectHelper";b=document.createElement("span");b.innerText="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";h.appendChild(b);f.insertBefore(h,g);h.style.position="absolute";h.style.visibility="hidden";h.style.top="-200px";h.style.left="-100000px";h.style.width="100000px";h.style.height="200px";h.style.fontSize="100px"}function d(f,g){if(f instanceof Element){return window.getComputedStyle(f).getPropertyValue(g)}else{if(window.jQuery){return $(f).css(g)}else{return""}}}return{onFontLoaded:function(l,g,k,j){if(!l){return}var i=(j&&j.msInterval)?j.msInterval:100;var m=(j&&j.msTimeout)?j.msTimeout:2000;if(!g&&!k){return}if(!a){e()}if(this.isFontLoaded(l)){if(g){g(l)}return}var f=this;var n=new Date().getTime();var h=setInterval(function(){if(f.isFontLoaded(l)){clearInterval(h);g(l);return}else{var o=new Date().getTime();if((o-n)>m){clearInterval(h);if(k){k(l)}}}},i)},isFontLoaded:function(f){var i=0;var h=0;if(!a){e()}for(var g=0;g<c.length;++g){b.style.fontFamily='"'+f+'",'+c[g];i=b.offsetWidth;if(g>0&&i!=h){return false}h=i}return true},whichFont:function(g){var h=d(g,"font-family");var j=h.split(",");var i=j.shift();while(i){i=i.replace(/^\s*['"]?\s*([^'"]*)\s*['"]?\s*$/,"$1");for(var f=0;f<c.length;f++){if(i==c[f]){return i}}if(this.isFontLoaded(i)){return i}i=j.shift()}return null}}}()});